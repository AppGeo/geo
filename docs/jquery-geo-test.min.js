(function(e){function m(l){var d=[].slice.call(arguments,1),g=0;l=e.event.fix(l||window.event);l.type="mousewheel";if(l.wheelDelta)g=l.wheelDelta/120;if(l.detail)g=-l.detail/3;d.unshift(l,g);return e.event.handle.apply(this,d)}var o=["DOMMouseScroll","mousewheel"];e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var l=o.length;l;)this.addEventListener(o[--l],m,false);else this.onmousewheel=m},teardown:function(){if(this.removeEventListener)for(var l=o.length;l;)this.removeEventListener(o[--l],
m,false);else this.onmousewheel=null}};e.fn.extend({mousewheel:function(l){return l?this.bind("mousewheel",l):this.trigger("mousewheel")},unmousewheel:function(l){return this.unbind("mousewheel",l)}})})(jQuery);
(function(e,m){var o=Array.prototype.slice,l=e.cleanData;e.cleanData=function(d){for(var g=0,h;(h=d[g])!=null;g++)e(h).triggerHandler("remove");l(d)};e.widget=function(d,g,h){var j=d.split(".")[0],k;d=d.split(".")[1];k=j+"-"+d;if(!h){h=g;g=e.Widget}e.expr[":"][k]=function(n){return!!e.data(n,d)};e[j]=e[j]||{};e[j][d]=e.extend(function(n,s){if(!this._createWidget)return new e[j][d](n,s);arguments.length&&this._createWidget(n,s)},e[j][d]);var u=new g;u.options=e.extend(true,{},u.options);e.each(h,function(n,
s){if(e.isFunction(s))h[n]=function(){var E=function(x){return g.prototype[x].apply(this,o.call(arguments,1))},w=function(x,q){return g.prototype[x].apply(this,q)};return function(){var x=this._super,q=this._superApply,t;this._super=E;this._superApply=w;t=s.apply(this,arguments);this._super=x;this._superApply=q;return t}}()});e[j][d].prototype=e.extend(true,u,{namespace:j,widgetName:d,widgetEventPrefix:d,widgetBaseClass:k},h);e.widget.bridge(d,e[j][d])};e.widget.bridge=function(d,g){e.fn[d]=function(h){var j=
typeof h==="string",k=o.call(arguments,1),u=this;h=!j&&k.length?e.extend.apply(null,[true,h].concat(k)):h;j?this.each(function(){var n=e.data(this,d);if(!n)return e.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+h+"'");if(!e.isFunction(n[h])||h.charAt(0)==="_")return e.error("no such method '"+h+"' for "+d+" widget instance");var s=n[h].apply(n,k);if(s!==n&&s!==m){u=s;return false}}):this.each(function(){var n=e.data(this,d);n?n.option(h||{})._init():g(h,
this)});return u}};e.Widget=function(d,g){if(!this._createWidget)return new e[namespace][name](d,g);arguments.length&&this._createWidget(d,g)};e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false},_createWidget:function(d,g){g=e(g||this.defaultElement||this)[0];this.element=e(g);this.options=e.extend(true,{},this.options,this._getCreateOptions(),d);this.bindings=e();this.hoverable=e();this.focusable=e();if(g!==this){e.data(g,this.widgetName,this);
this._bind({remove:"destroy"})}this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:e.noop,_init:e.noop,destroy:function(){this._destroy();this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled");this.bindings.unbind("."+this.widgetName);this.hoverable.removeClass("ui-state-hover");
this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(d,g){var h=d;if(arguments.length===0)return e.extend({},this.options);if(typeof d==="string"){if(g===m)return this.options[d];h={};h[d]=g}this._setOptions(h);return this},_setOptions:function(d){var g=this;e.each(d,function(h,j){g._setOption(h,j)});return this},_setOption:function(d,g){this.options[d]=g;if(d==="disabled"){this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",
!!g).attr("aria-disabled",g);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_bind:function(d,g){if(g){d=e(d);this.bindings=this.bindings.add(d)}else{g=d;d=this.element}var h=this;e.each(g,function(j,k){d.bind(j+"."+h.widgetName,function(){if(!(h.options.disabled===true||e(this).hasClass("ui-state-disabled")))return(typeof k===
"string"?h[k]:k).apply(h,arguments)})})},_hoverable:function(d){this.hoverable=this.hoverable.add(d);this._bind(d,{mouseenter:function(g){e(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){e(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(d){this.focusable=this.focusable.add(d);this._bind(d,{focusin:function(g){e(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){e(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(d,g,h){var j=
this.options[d];g=e.Event(g);g.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();h=h||{};if(g.originalEvent){d=e.event.props.length;for(var k;d;){k=e.event.props[--d];g[k]=g.originalEvent[k]}}this.element.trigger(g,h);h=e.isArray(h)?[g].concat(h):[g,h];return!(e.isFunction(j)&&j.apply(this.element[0],h)===false||g.isDefaultPrevented())}}})(jQuery);
(function(e){e.geo={_center:function(m){return[(m[0]+m[2])/2,(m[1]+m[3])/2]},_expandBy:function(m,o,l){m=this._center(m);return[m[0]-o,m[1]-l,m[0]+o,m[1]+l]},_height:function(m){return m[3]-m[1]},_reaspect:function(m,o){var l=this._width(m),d=this._height(m);this._center(m);if(l==0||d==0||o<=0)return m;if(l/d>o){l=l/2;d=l/o}else{d=d/2;l=d*o}return[c[0]-l,c[1]-d,c[0]+l,c[1]+d]},_scaleBy:function(m,o){return this._expandBy(m,this._width(m)*o/2,this._height(m)*o/2)},_width:function(m){return m[2]-m[0]},
proj:function(){function m(d){return d>Math.PI?d-=o:d<-Math.PI?d+=o:d}var o=6.283185307179586;this.CoordinateSystem=function(d,g,h,j){if(arguments.length<2)g=0;if(arguments.length<3)h=0;if(arguments.length<4)j=1;switch(j){case "meters":j=1;break;case "feet":j=3.2808333333333333}this.toGeodetic=function(k){return d.toGeodetic({x:(k.x-g)/j,y:(k.y-h)/j})};this.toProjected=function(k){k=d.toProjected(k);return{x:k.x*j+g,y:k.y*j+h}}};this.Mercator=function(d,g,h){d*=0.017453292519943295;g*=0.017453292519943295;
var j=h.e*h.e,k=Math.sin(g),u=1/(Math.sqrt(1-j*k*k)/Math.cos(g));g=j*j;k=g*j;var n=k*j,s=j/2+5*g/24+k/12+13*n/360,E=7*g/48+29*k/240+811*n/11520,w=7*k/120+81*n/1120,x=4279*n/161280;this.toGeodetic=function(q){var t=m(d+q.x/(u*h.smaj));q=1.5707963267948966-2*Math.atan(1/Math.exp(q.y/(u*h.smaj)));return{x:t*57.29577951308232,y:(q+s*Math.sin(2*q)+E*Math.sin(4*q)+w*Math.sin(6*q)+x*Math.sin(8*q))*57.29577951308232}};this.toProjected=function(q){var t=q.y*0.017453292519943295,I=h.e*Math.sin(t);t=Math.tan(Math.PI/
4+t/2)*Math.pow((1-I)/(1+I),h.e/2);q=m(q.x*0.017453292519943295-d);return{x:u*h.smaj*q,y:u*h.smaj*Math.log(t)}}};this.Spheroid=function(d,g){switch(typeof d){case "number":this.smaj=d;this.e=g;break;case "string":switch(d){case "WGS84Sphere":this.smaj=6378137;this.e=0}}this.smin=this.smaj*Math.sqrt(1-this.e*this.e);var h=(this.smaj-this.smin)/this.smaj;this.distance=function(j,k,u){if(arguments.length<3)u=1;switch(u){case "meters":u=1;break;case "feet":u=3.2808333333333333}var n=j.y*0.017453292519943295,
s=k.y*0.017453292519943295,E=(n+s)*0.5,w=(n-s)*0.5,x=(j.x*0.017453292519943295-k.x*0.017453292519943295)*0.5;n=Math.sin(E);n*=n;E=Math.cos(E);E*=E;s=Math.sin(w);s*=s;w=Math.cos(w);w*=w;var q=Math.sin(x);q*=q;var t=Math.cos(x);t*=t;x=s*t+E*q;q=w*t+n*q;t=Math.atan(Math.sqrt(x/q));var I=Math.sqrt(x*q)/t;return 2*this.smaj*t*(1+h*((3*I-1)/(2*q)*n*w-(3*I+1)/(2*x)*E*s))*u}};var l=new Mercator(0,0,new Spheroid("WGS84Sphere"));return{fromGeodetic:function(d){for(var g=[],h=0,j;h<d.length;h++){j=l.toProjected({x:d[h][0],
y:d[h][1]});g[h]=[j.x,j.y]}return g},toGeodetic:function(d){for(var g=[],h=0,j;h<d.length;h++){j=l.toGeodetic({x:d[h][0],y:d[h][1]});g[h]=[j.x,j.y]}return g}}}()}})(jQuery,this);
(function(e,m){var o="center",l,d={},g,h,j,k,u=[],n,s,E,w,x,q,t,I,C,Z,$,W,R,X,F,S,ga=function(){for(var a=5,b=document.createElement("div"),f=b.all||[];b.innerHTML="<!--[if gt IE "+ ++a+"]><br><![endif]--\>",f[0];);return a>6?a:!a}(),P,aa=this._supportTouch||this._ieVersion==7,T,Q,L={},p={},ja={bbox:[-180,-85,180,85],bboxMax:[-180,-85,180,85],center:[0,0],cursors:{pan:"move"},mode:"pan",services:[{id:"OSM",type:"tiled",getUrl:function(a){return"http://tile.openstreetmap.org/"+a.zoom+"/"+a.tile.column+
"/"+a.tile.row+".png"},attr:"&copy; OpenStreetMap &amp; contributors, CC-BY-SA"}],tilingScheme:{tileWidth:256,tileHeight:256,levels:18,basePixelSize:156543.03392799935,origin:[-2.0037508342787E7,2.0037508342787E7]},zoom:0,_serviceTypes:{tiled:function(){var a={};return{create:function(b,f){if(a[f.id]==null){a[f.id]={loadCount:0,reloadTiles:false,serviceContainer:null};h.append("<div data-service='"+f.id+"' style='position:absolute; left:0; top:0; width:8px; height:8px; margin:0; padding:0; display:"+
(f.visible===m||f.visible?"block":"none")+";'></div>");a[f.id].serviceContainer=h.children("[data-service='"+f.id+"']")}},destroy:function(b,f){a[f.id].serviceContainer.remove();delete a[f.id]},interactivePan:function(b,f,r,D){this._cancelUnloaded(b,f);a[f.id].serviceContainer.children().css({left:function(v,B){return parseInt(B)+r},top:function(v,B){return parseInt(B)+D}})},interactiveScale:function(){},refresh:function(b,f){if(f!=null&&a[f.id]!=null&&(f.visible===m||f.visible)){this._cancelUnloaded(b,
f);var r=a[f.id],D=r.serviceContainer,v=n,B=b._getBbox(),y=b.options.tilingScheme,z=y.tileWidth,A=y.tileHeight,G=Math.floor((B[0]-y.origin[0])/(v*z)),ba=Math.floor((y.origin[1]-B[3])/(v*A)),ha=Math.ceil((B[2]-y.origin[0])/(v*z)),ia=Math.ceil((y.origin[1]-B[1])/(v*A)),J=b._getBboxMax(),H=b._getTiledPixelSize(0),U=H/v,ca=Math.floor((J[0]-y.origin[0])/(H*z))*U,da=Math.floor((y.origin[1]-J[3])/(H*A))*U,M=Math.round((y.origin[0]+ca*z*v-B[0])/v),N=Math.round((B[3]-(y.origin[1]-da*A*v))/v);B=D.children().show();
J=B.filter("[data-pixelSize='"+v+"']").appendTo(D);var Y=f.opacity===m?1:f.opacity;r.reloadTiles&&B.find("img").attr("data-dirty","true");if(J.size()===0){D.append("<div style='position:absolute; left:"+M%z+"px; top:"+N%A+"px; width:"+z+"px; height:"+A+"px; margin:0; padding:0;' data-pixelSize='"+v+"'></div>");J=D.children(":last").data("scaleOrigin",M%z+","+N%A)}else{J.css({left:M%z+"px",top:N%A+"px"}).data("scaleOrigin",M%z+","+N%A);J.children().each(function(){var O=e(this),ea=O.attr("data-tile").split(",");
O.css({left:Math.round((parseInt(ea[0])-ca)*100+(M-M%z)/z*100)+"%",top:Math.round((parseInt(ea[1])-da)*100+(N-N%A)/A*100)+"%"});Y<1&&O.fadeTo(0,Y)})}for(G=G;G<ha;G++)for(H=ba;H<ia;H++){U=""+G+","+H;var K=J.children("[data-tile='"+U+"']");K.removeAttr("data-dirty");if(K.size()===0||r.reloadTiles){var V=[y.origin[0]+G*z*v,y.origin[1]-H*A*v],fa=[y.origin[0]+((G+1)*z-1)*v,y.origin[1]-((H+1)*A-1)*v];V=f.getUrl({bbox:[V[0],V[1],fa[0],fa[1]],width:z,height:A,zoom:b._getZoom(),tile:{row:H,column:G},index:Math.abs(H+
G)});r.loadCount++;if(r.reloadTiles&&K.size()>0)K.attr("src",V);else{K="<img style='position:absolute; left:"+((G-ca)*100+(M-M%z)/z*100)+"%; top:"+((H-da)*100+(N-N%A)/A*100)+"%; ";if(e("body")[0].filters===m)K+="width: 100%; height: 100%;";K+="margin:0; padding:0; -moz-user-select:none; display:none;' unselectable='on' data-tile='"+U+"' />";J.append(K);K=J.children(":last");K.load(function(O){Y<1?e(O.target).fadeTo(0,Y):e(O.target).show();r.loadCount--;if(r.loadCount<=0){D.children(":not([data-pixelSize='"+
v+"'])").remove();r.loadCount=0}}).error(function(O){e(O.target).remove();r.loadCount--;if(r.loadCount<=0){D.children(":not([data-pixelSize='"+v+"'])").remove();r.loadCount=0}}).attr("src",V)}}}B.find("[data-dirty]").remove();r.reloadTiles=false}},_cancelUnloaded:function(b,f){var r=a[f.id],D=r.serviceContainer;if(r.loadCount>0)for(D.find("img:hidden").remove();r.loadCount>0;)r.loadCount--},_onOpacityChanged:function(){}}}()}};e.widget("geo.geomap",function(){return{options:e.extend({},ja),_createWidget:function(a,
b){L=a;l=e(b);var f=l.css("position");f!="relative"&&f!="absolute"&&f!="fixed"&&l.css("position","relative");l.css("text-align","left");f=this._findMapSize();d={x:parseInt(l.css("padding-left")),y:parseInt(l.css("padding-top")),width:f.width,height:f.height};this._createChildren();o=s=[0,0];n=E=156543.03392799935;w=x=q=t=X=T=Q=false;I=C=W=R=F=[0,0];S=[0.8,0.8];Z=$=0;e.Widget.prototype._createWidget.apply(this,arguments)},_create:function(){p=this.options;var a=(P="ontouchend"in document)?"touchstart":
"mousedown",b=P?"touchend touchcancel":"mouseup",f=P?"touchmove":"mousemove";k.dblclick(e.proxy(this._eventTarget_dblclick,this));k.bind(a,e.proxy(this._eventTarget_touchstart,this));a=k[0].setCapture?k:e(document);a.bind(f,e.proxy(this._dragTarget_touchmove,this));a.bind(b,e.proxy(this._dragTarget_touchstop,this));k.mousewheel(e.proxy(this._eventTarget_mousewheel,this));if(L){L.bbox&&this._setOption("bbox",L.bbox,false);L.center&&this._setOption("center",L.center,false);L.zoom&&this._setZoom(L.zoom,
false,false)}k.css("cursor",p.cursors[p.mode]);this._createServices();this._refresh()},_setOption:function(a,b,f){f=f===m||f;switch(a){case "bbox":if(e.geo.proj){b=e.geo.proj.fromGeodetic([[b[0],b[1]],[b[2],b[3]]]);b=[b[0][0],b[0][1],b[1][0],b[1][1]]}this._setBbox(b,false,f);b=this._getBbox();if(e.geo.proj){b=e.geo.proj.toGeodetic([[b[0],b[1]],[b[2],b[3]]]);b=[b[0][0],b[0][1],b[1][0],b[1][1]]}break;case "center":this._setCenterAndSize(e.geo.proj?e.geo.proj.fromGeodetic([[b[0],b[1]]])[0]:b,n,false,
f);break;case "zoom":this._setZoom(b,false,f)}e.Widget.prototype._setOption.apply(this,arguments);switch(a){case "services":this._createServices();f&&this._refresh()}},destroy:function(){e.Widget.prototype.destroy.apply(this,arguments);this.element.html("")},getPixelSize:function(){return n},_getBbox:function(){var a=d.width/2*n,b=d.height/2*n;return[o[0]-a,o[1]-b,o[0]+a,o[1]+b]},_setBbox:function(a,b,f){var r=[a[0]+(a[2]-a[0])/2,a[1]+(a[3]-a[1])/2];a=Math.max(e.geo._width(a)/d.width,e.geo._height(a)/
d.height);if(p.tilingScheme)a=this._getTiledPixelSize(this._getTiledZoom(a));this._setCenterAndSize(r,a,b,f)},_getBboxMax:function(){var a=d.width/2*E,b=d.height/2*E;return[s[0]-a,s[1]-b,s[0]+a,s[1]+b]},_getZoom:function(){if(p.tilingScheme)return this._getTiledZoom(n);else{var a=d.width/d.height,b=e.geo._reaspect(this._getBbox(),a);a=e.geo._reaspect(this._getBboxMax(),a);return Math.log(e.geo._width(a)/e.geo._width(b))/Math.log(2)}},_setZoom:function(a,b,f){a=Math.max(a,0);if(p.tilingScheme)this._setCenterAndSize(o,
this._getTiledPixelSize(a),b,f);else{a=e.geo._scaleBy(this._getBbox(),1/Math.pow(2,a));a=Math.max(e.geo._width(a)/d.width,e.geo._height(a)/d.height);this._setCenterAndSize(o,a,b,f)}},_createChildren:function(){var a=l.children().detach();a.css("-moz-user-select","none");l.prepend("<div style='position:absolute; left:"+d.x+"px; top:"+d.y+"px; width:"+d.width+"px; height:"+d.height+"px; margin:0; padding:0; overflow:hidden; -khtml-user-select:none; -moz-user-select:none; -webkit-user-select:none; user-select:none;' unselectable='on'></div>");
k=g=l.children(":first");g.append('<div style="position:absolute; left:0; top:0; width:'+d.width+"px; height:"+d.height+'px; margin: 0; padding: 0;"></div>');h=g.children(":last");g.append('<div style="position:absolute; left:0; top:0; width:'+d.width+"px; height:"+d.height+'px; margin: 0; padding: 0;"></div>');g.children(":last");g.append('<div class="ui-widget ui-widget-content ui-corner-all" style="position:absolute; left:0; top:0px; max-width:128px; display:none;"><div style="margin:.2em;"></div></div>');
j=g.children(":last");j.children();g.append(a)},_createServices:function(){var a;for(a=0;a<u.length;a++)p._serviceTypes[u[a].type].destroy(this,u[a]);for(a=0;a<p.services.length;a++)p._serviceTypes[p.services[a].type].create(this,p.services[a],a);u=p.services},_findMapSize:function(){for(var a={width:0,height:0},b=l;b.size()&&!(a.width>0&&a.height>0);){a={width:b.width(),height:b.height()};if(a.width<=0||a.height<=0)a={width:parseInt(b.css("width")),height:parseInt(b.css("height"))};b=b.parent()}return a},
_getTiledPixelSize:function(a){var b=p.tilingScheme;if(b!=null){if(a===0)return b.pixelSizes!=null?b.pixelSizes[0]:b.basePixelSize;a=Math.round(a);a=Math.max(a,0);a=Math.min(a,(b.pixelSizes!=null?b.pixelSizes.length:b.levels)-1);return b.pixelSizes!=null?b.pixelSizes[a]:b.basePixelSize/Math.pow(2,a)}else return NaN},_getTiledZoom:function(a){var b=p.tilingScheme;if(b.pixelSizes!=null){a=Math.round(a);for(var f=(b.pixelSizes!=null?b.pixelSizes.length:b.levels)-1;f>=0;f--)if(Math.round(b.pixelSizes[f])>=
a)return f;return 0}else return Math.max(Math.round(Math.log(b.basePixelSize/a)/Math.log(2)),0)},_panEnd:function(){F=[F[0]>0?Math.floor(F[0]*S[0]):Math.ceil(F[0]*S[0]),F[1]>0?Math.floor(F[1]*S[1]):Math.ceil(F[1]*S[1])];if(Math.abs(F[0])<4&&Math.abs(F[1])<4)this._panFinalize();else{C=[C[0]+F[0],C[1]+F[1]];this._panMove();setTimeout(e.proxy(this._panEnd,this),30)}},_panFinalize:function(){if(X){F=[0,0];this._setCenterAndSize([o[0]+-(C[0]-I[0])*n,o[1]+(C[1]-I[1])*n],n,true,true);x=false;I=C;q=X=false;
k.css("cursor",p.cursors[p.mode])}},_panMove:function(){var a=C[0]-R[0],b=C[1]-R[1];if(q||a>3||a<-3||b>3||b<-3){if(!q){q=true;k.css("cursor",p.cursors.pan)}if(w)F=[a,b];if(a!=0||b!=0){X=true;R=C;for(i=0;i<p.services.length;i++){var f=p.services[i];p._serviceTypes[f.type].interactivePan(this,f,a,b)}}}},_refresh:function(){for(var a=0;a<p.services.length;a++){var b=p.services[a];!w&&p._serviceTypes[b.type]!=null&&p._serviceTypes[b.type].refresh(this,b)}},_setCenterAndSize:function(a,b,f,r){if(n!=b)for(f=
0;f<p.services.length;f++){var D=p.services[f];p._serviceTypes[D.type].interactiveScale(this,D,a,b)}o=a;n=b;if(e.geo.proj){a=this._getBbox();a=e.geo.proj.toGeodetic([[a[0],a[1]],[a[2],a[3]]]);a=[a[0][0],a[0][1],a[1][0],a[1][1]];p.bbox=a;p[o]=e.geo.proj.toGeodetic([[o[0],o[1]]])[0]}else{p.bbox=this._getBbox();p[o]=o}p.zoom=this._getZoom();r&&this._refresh()},_toMap:function(a,b,f){var r=e.isArray(a[0]);r||(a=[a]);b=b||o;f=f||n;var D=d.width,v=d.height,B=D/2*f;f=v/2*f;var y=[b[0]-B,b[1]-f,b[0]+B,b[1]+
f],z=e.geo._width(y)/D,A=e.geo._height(y)/v,G=[];e.each(a,function(ba){G[ba]=[y[0]+this[0]*z,y[3]-this[1]*A]});return r?G:G[0]},_zoomTo:function(a,b){b=b<0?0:b;var f=this._getTiledPixelSize(b);if(isNaN(f)){f=e.geo._scaleBy(this._getBboxMax(),1/Math.pow(2,b));f=Math.max(e.geo._width(f)/d.width,e.geo._height(f)/d.height);this._setCenterAndSize(a,f,false,true)}else this._setCenterAndSize(a,f,false,true)},_eventTarget_dblclick:function(a){this._panFinalize();offset=e(a.currentTarget).offset();switch(p.mode){case "pan":this._zoomTo(this._toMap(C),
this._getZoom()+1)}x=false},_eventTarget_touchstart:function(a){if(!(!P&&a.which!=1)){if(aa){var b=e.now();Q=b-Z<750?Q?false:T:false;T=true;Z=b}a.preventDefault();this._panFinalize();b=e(a.currentTarget).offset();C=P?[a.originalEvent.changedTouches[0].pageX-b.left,a.originalEvent.changedTouches[0].pageY-b.top]:[a.pageX-b.left,a.pageY-b.top];w=true;I=C;if(!x&&a.shiftKey){t=true;k.css("cursor",p.cursors.zoom)}else{x=true;switch(p.mode){case "pan":R=C;a.currentTarget.setCapture&&a.currentTarget.setCapture()}}return false}},
_dragTarget_touchmove:function(a){var b=k.offset();a=P?[a.originalEvent.changedTouches[0].pageX-b.left,a.originalEvent.changedTouches[0].pageY-b.top]:[a.pageX-b.left,a.pageY-b.top];if(!(a[0]==W[0]&&a[1]==W[1])){if(aa)Q=T=false;if(w){C=a;$=e.now()}switch(t?"zoom":p.mode){case "pan":w&&this._panMove()}W=a}},_dragTarget_touchstop:function(a){!w&&ga==7&&this._eventTarget_touchstart(a);var b=w,f=k.offset();f=P?[a.originalEvent.changedTouches[0].pageX-f.left,a.originalEvent.changedTouches[0].pageY-f.top]:
[a.pageX-f.left,a.pageY-f.top];var r=t?"zoom":p.mode;k.css("cursor",p.cursors[r]);t=w=q=false;document.releaseCapture&&document.releaseCapture();if(b){b=e.now();C=f;switch(r){case "pan":b-$>500?this._panFinalize():this._panEnd()}if(aa&&Q){Q=T=false;k.trigger("dblclick",a)}}},_eventTarget_mousewheel:function(){}}}())})(jQuery);
