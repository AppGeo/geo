document.createElement("canvas").getContext||function(){function d(){return this.context_||(this.context_=new u(this))}function t(c,f){var o=ma.call(arguments,2);return function(){return c.apply(f,o.concat(ma.call(arguments)))}}function G(c){c.namespaces.g_vml_||c.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");c.namespaces.g_o_||c.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");if(!c.styleSheets.ex_canvas_){c=c.createStyleSheet();c.owningElement.id=
"ex_canvas_";c.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function p(c){var f=c.srcElement;switch(c.propertyName){case "width":f.getContext().clearRect();f.style.width=f.attributes.width.nodeValue+"px";f.firstChild.style.width=f.clientWidth+"px";break;case "height":f.getContext().clearRect();f.style.height=f.attributes.height.nodeValue+"px";f.firstChild.style.height=f.clientHeight+"px"}}function g(c){c=c.srcElement;if(c.firstChild){c.firstChild.style.width=
c.clientWidth+"px";c.firstChild.style.height=c.clientHeight+"px"}}function h(){return[[1,0,0],[0,1,0],[0,0,1]]}function l(c,f){for(var o=h(),B=0;B<3;B++)for(var E=0;E<3;E++){for(var w=0,x=0;x<3;x++)w+=c[B][x]*f[x][E];o[B][E]=w}return o}function k(c,f){f.fillStyle=c.fillStyle;f.lineCap=c.lineCap;f.lineJoin=c.lineJoin;f.lineWidth=c.lineWidth;f.miterLimit=c.miterLimit;f.shadowBlur=c.shadowBlur;f.shadowColor=c.shadowColor;f.shadowOffsetX=c.shadowOffsetX;f.shadowOffsetY=c.shadowOffsetY;f.strokeStyle=c.strokeStyle;
f.globalAlpha=c.globalAlpha;f.font=c.font;f.textAlign=c.textAlign;f.textBaseline=c.textBaseline;f.arcScaleX_=c.arcScaleX_;f.arcScaleY_=c.arcScaleY_;f.lineScale_=c.lineScale_}function v(c){var f=c.indexOf("(",3),o=c.indexOf(")",f+1);f=c.substring(f+1,o).split(",");if(f.length!=4||c.charAt(3)!="a")f[3]=1;return f}function j(c,f,o){return Math.min(o,Math.max(f,c))}function m(c,f,o){o<0&&o++;o>1&&o--;return 6*o<1?c+(f-c)*6*o:2*o<1?f:3*o<2?c+(f-c)*(2/3-o)*6:c}function q(c){if(c in fa)return fa[c];var f,
o=1;c=String(c);if(c.charAt(0)=="#")f=c;else if(/^rgb/.test(c)){o=v(c);f="#";for(var B,E=0;E<3;E++){B=o[E].indexOf("%")!=-1?Math.floor(parseFloat(o[E])/100*255):+o[E];f+=Z[j(B,0,255)]}o=+o[3]}else if(/^hsl/.test(c)){E=o=v(c);f=parseFloat(E[0])/360%360;f<0&&f++;B=j(parseFloat(E[1])/100,0,1);E=j(parseFloat(E[2])/100,0,1);if(B==0)B=E=f=E;else{var w=E<0.5?E*(1+B):E+B-E*B,x=2*E-w;B=m(x,w,f+1/3);E=m(x,w,f);f=m(x,w,f-1/3)}f="#"+Z[Math.floor(B*255)]+Z[Math.floor(E*255)]+Z[Math.floor(f*255)];o=o[3]}else f=
c;return fa[c]={color:f,alpha:o}}function u(c){this.m_=h();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.fillStyle=this.strokeStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=aa*1;this.globalAlpha=1;this.canvas=c;var f="width:"+c.clientWidth+"px;height:"+c.clientHeight+"px;overflow:hidden;position:absolute",o=c.ownerDocument.createElement("div");o.style.cssText=f;c.appendChild(o);f=o.cloneNode(false);f.style.backgroundColor="red";f.style.filter="alpha(opacity=0)";
c.appendChild(f);this.element_=o;this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function J(c,f,o){c=c.m_;return{x:aa*(f*c[0][0]+o*c[1][0]+c[2][0])-ea,y:aa*(f*c[0][1]+o*c[1][1]+c[2][1])-ea}}function L(c,f,o){if(isFinite(f[0][0])&&isFinite(f[0][1])&&isFinite(f[1][0])&&isFinite(f[1][1])&&isFinite(f[2][0])&&isFinite(f[2][1])){c.m_=f;if(o)c.lineScale_=Q(ga(f[0][0]*f[1][1]-f[0][1]*f[1][0]))}}function I(c){this.code=this[c];this.message=c+": DOM Exception "+this.code}var H=Math,K=H.round,ba=H.sin,ia=
H.cos,ga=H.abs,Q=H.sqrt,aa=10,ea=aa/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var ma=Array.prototype.slice;G(document);H={init:function(c){c=c||document;c.createElement("canvas");c.attachEvent("onreadystatechange",t(this.init_,this,c))},init_:function(c){c=c.getElementsByTagName("canvas");for(var f=0;f<c.length;f++)this.initElement(c[f])},initElement:function(c){if(!c.getContext){c.getContext=d;G(c.ownerDocument);c.innerHTML="";c.attachEvent("onpropertychange",p);c.attachEvent("onresize",g);var f=
c.attributes;if(f.width&&f.width.specified)c.style.width=f.width.nodeValue+"px";else c.width=c.clientWidth;if(f.height&&f.height.specified)c.style.height=f.height.nodeValue+"px";else c.height=c.clientHeight}return c}};H.init();for(var Z=[],D=0;D<16;D++)for(var R=0;R<16;R++)Z[D*16+R]=D.toString(16)+R.toString(16);var fa={},na={butt:"flat",round:"round"};D=u.prototype;D.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null}this.element_.innerHTML=
""};D.beginPath=function(){this.currentPath_=[]};D.moveTo=function(c,f){var o=J(this,c,f);this.currentPath_.push({type:"moveTo",x:o.x,y:o.y});this.currentX_=o.x;this.currentY_=o.y};D.lineTo=function(c,f){var o=J(this,c,f);this.currentPath_.push({type:"lineTo",x:o.x,y:o.y});this.currentX_=o.x;this.currentY_=o.y};D.arc=function(c,f,o,B,E,w){o*=aa;var x=w?"at":"wa",ja=c+ia(B)*o-ea,a=f+ba(B)*o-ea;B=c+ia(E)*o-ea;E=f+ba(E)*o-ea;if(ja==B&&!w)ja+=0.125;c=J(this,c,f);ja=J(this,ja,a);B=J(this,B,E);this.currentPath_.push({type:x,
x:c.x,y:c.y,radius:o,xStart:ja.x,yStart:ja.y,xEnd:B.x,yEnd:B.y})};D.stroke=function(c){var f=[];f.push("<g_vml_:shape",' filled="',!!c,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',aa*10,",",aa*10,'"',' stroked="',!c,'"',' path="');for(var o={x:null,y:null},B={x:null,y:null},E=0;E<this.currentPath_.length;E++){var w=this.currentPath_[E];switch(w.type){case "moveTo":f.push(" m ",K(w.x),",",K(w.y));break;case "lineTo":f.push(" l ",K(w.x),",",K(w.y));
break;case "close":f.push(" x ");w=null;break;case "bezierCurveTo":f.push(" c ",K(w.cp1x),",",K(w.cp1y),",",K(w.cp2x),",",K(w.cp2y),",",K(w.x),",",K(w.y));break;case "at":case "wa":f.push(" ",w.type," ",K(w.x-this.arcScaleX_*w.radius),",",K(w.y-this.arcScaleY_*w.radius)," ",K(w.x+this.arcScaleX_*w.radius),",",K(w.y+this.arcScaleY_*w.radius)," ",K(w.xStart),",",K(w.yStart)," ",K(w.xEnd),",",K(w.yEnd))}if(w){if(o.x==null||w.x<o.x)o.x=w.x;if(B.x==null||w.x>B.x)B.x=w.x;if(o.y==null||w.y<o.y)o.y=w.y;if(B.y==
null||w.y>B.y)B.y=w.y}}f.push(' ">');if(c){c=q(this.fillStyle);f.push('<g_vml_:fill color="',c.color,'" opacity="',c.alpha*this.globalAlpha,'" />')}else{o=q(this.strokeStyle);c=o.color;o=o.alpha*this.globalAlpha;B=this.lineScale_*this.lineWidth;if(B<1)o*=B;f.push("<g_vml_:stroke",' opacity="',o,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',na[this.lineCap]||"square",'"',' weight="',B,'px"',' color="',c,'" />')}f.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",
f.join(""))};D.fill=function(){this.stroke(true)};D.closePath=function(){this.currentPath_.push({type:"close"})};D.save=function(){var c={};k(this,c);this.aStack_.push(c);this.mStack_.push(this.m_);this.m_=l(h(),this.m_)};D.restore=function(){if(this.aStack_.length){k(this.aStack_.pop(),this);this.m_=this.mStack_.pop()}};D.translate=function(c,f){L(this,l([[1,0,0],[0,1,0],[c,f,1]],this.m_),false)};D.scale=function(c,f){this.arcScaleX_*=c;this.arcScaleY_*=f;L(this,l([[c,0,0],[0,f,0],[0,0,1]],this.m_),
true)};D=I.prototype=Error();D.INDEX_SIZE_ERR=1;D.DOMSTRING_SIZE_ERR=2;D.HIERARCHY_REQUEST_ERR=3;D.WRONG_DOCUMENT_ERR=4;D.INVALID_CHARACTER_ERR=5;D.NO_DATA_ALLOWED_ERR=6;D.NO_MODIFICATION_ALLOWED_ERR=7;D.NOT_FOUND_ERR=8;D.NOT_SUPPORTED_ERR=9;D.INUSE_ATTRIBUTE_ERR=10;D.INVALID_STATE_ERR=11;D.SYNTAX_ERR=12;D.INVALID_MODIFICATION_ERR=13;D.NAMESPACE_ERR=14;D.INVALID_ACCESS_ERR=15;D.VALIDATION_ERR=16;D.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=H;CanvasRenderingContext2D=u;DOMException=I}();
(function(d){function t(p){var g=[].slice.call(arguments,1),h=0;p=d.event.fix(p||window.event);p.type="mousewheel";if(p.wheelDelta)h=p.wheelDelta/120;if(p.detail)h=-p.detail/3;g.unshift(p,h);return d.event.handle.apply(this,g)}var G=["DOMMouseScroll","mousewheel"];d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var p=G.length;p;)this.addEventListener(G[--p],t,false);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var p=G.length;p;)this.removeEventListener(G[--p],
t,false);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(p){return p?this.bind("mousewheel",p):this.trigger("mousewheel")},unmousewheel:function(p){return this.unbind("mousewheel",p)}})})(jQuery);
$.widget||function(d,t){var G=Array.prototype.slice,p=d.cleanData;d.cleanData=function(g){for(var h=0,l;(l=g[h])!=null;h++)d(l).triggerHandler("remove");p(g)};d.widget=function(g,h,l){var k=g.split(".")[0],v;g=g.split(".")[1];v=k+"-"+g;if(!l){l=h;h=d.Widget}d.expr[":"][v]=function(m){return!!d.data(m,g)};d[k]=d[k]||{};d[k][g]=d.extend(function(m,q){if(!this._createWidget)return new d[k][g](m,q);arguments.length&&this._createWidget(m,q)},d[k][g]);var j=new h;j.options=d.extend(true,{},j.options);d.each(l,
function(m,q){if(d.isFunction(q))l[m]=function(){var u=function(L){return h.prototype[L].apply(this,G.call(arguments,1))},J=function(L,I){return h.prototype[L].apply(this,I)};return function(){var L=this._super,I=this._superApply,H;this._super=u;this._superApply=J;H=q.apply(this,arguments);this._super=L;this._superApply=I;return H}}()});d[k][g].prototype=d.extend(true,j,{namespace:k,widgetName:g,widgetEventPrefix:g,widgetBaseClass:v},l);d.widget.bridge(g,d[k][g])};d.widget.bridge=function(g,h){d.fn[g]=
function(l){var k=typeof l==="string",v=G.call(arguments,1),j=this;l=!k&&v.length?d.extend.apply(null,[true,l].concat(v)):l;k?this.each(function(){var m=d.data(this,g);if(!m)return d.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+l+"'");if(!d.isFunction(m[l])||l.charAt(0)==="_")return d.error("no such method '"+l+"' for "+g+" widget instance");var q=m[l].apply(m,v);if(q!==m&&q!==t){j=q;return false}}):this.each(function(){var m=d.data(this,g);m?m.option(l||
{})._init():h(l,this)});return j}};d.Widget=function(g,h){if(!this._createWidget)return new d[namespace][name](g,h);arguments.length&&this._createWidget(g,h)};d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false},_createWidget:function(g,h){h=d(h||this.defaultElement||this)[0];this.element=d(h);this.options=d.extend(true,{},this.options,this._getCreateOptions(),g);this.bindings=d();this.hoverable=d();this.focusable=d();if(h!==this){d.data(h,this.widgetName,
this);this._bind({remove:"destroy"})}this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return d.metadata&&d.metadata.get(this.element[0])[this.widgetName]},_create:d.noop,_init:d.noop,destroy:function(){this._destroy();this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled");this.bindings.unbind("."+this.widgetName);this.hoverable.removeClass("ui-state-hover");
this.focusable.removeClass("ui-state-focus")},_destroy:d.noop,widget:function(){return this.element},option:function(g,h){var l=g;if(arguments.length===0)return d.extend({},this.options);if(typeof g==="string"){if(h===t)return this.options[g];l={};l[g]=h}this._setOptions(l);return this},_setOptions:function(g){var h=this;d.each(g,function(l,k){h._setOption(l,k)});return this},_setOption:function(g,h){this.options[g]=h;if(g==="disabled"){this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",
!!h).attr("aria-disabled",h);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_bind:function(g,h){if(h){g=d(g);this.bindings=this.bindings.add(g)}else{h=g;g=this.element}var l=this;d.each(h,function(k,v){g.bind(k+"."+l.widgetName,function(){if(!(l.options.disabled===true||d(this).hasClass("ui-state-disabled")))return(typeof v===
"string"?l[v]:v).apply(l,arguments)})})},_hoverable:function(g){this.hoverable=this.hoverable.add(g);this._bind(g,{mouseenter:function(h){d(h.currentTarget).addClass("ui-state-hover")},mouseleave:function(h){d(h.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(g){this.focusable=this.focusable.add(g);this._bind(g,{focusin:function(h){d(h.currentTarget).addClass("ui-state-focus")},focusout:function(h){d(h.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(g,h,l){var k=
this.options[g];h=d.Event(h);h.type=(g===this.widgetEventPrefix?g:this.widgetEventPrefix+g).toLowerCase();l=l||{};if(h.originalEvent){g=d.event.props.length;for(var v;g;){v=d.event.props[--g];h[v]=h.originalEvent[v]}}this.element.trigger(h,l);l=d.isArray(l)?[h].concat(l):[h,l];return!(d.isFunction(k)&&k.apply(this.element[0],l)===false||h.isDefaultPrevented())}}}(jQuery);
(function(d){d.geo={_center:function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},_expandBy:function(t,G,p){t=this._center(t);return[t[0]-G,t[1]-p,t[0]+G,t[1]+p]},_height:function(t){return t[3]-t[1]},_reaspect:function(t,G){var p=this._width(t),g=this._height(t),h=this._center(t);if(p==0||g==0||G<=0)return t;if(p/g>G){p=p/2;g=p/G}else{g=g/2;p=g*G}return[h[0]-p,h[1]-g,h[0]+p,h[1]+g]},_scaleBy:function(t,G){return this._expandBy(t,this._width(t)*G/2,this._height(t)*G/2)},_width:function(t){return t[2]-
t[0]},proj:function(){function t(g){return g>Math.PI?g-=G:g<-Math.PI?g+=G:g}var G=6.283185307179586;this.CoordinateSystem=function(g,h,l,k){if(arguments.length<2)h=0;if(arguments.length<3)l=0;if(arguments.length<4)k=1;switch(k){case "meters":k=1;break;case "feet":k=3.2808333333333333}this.toGeodetic=function(v){return g.toGeodetic({x:(v.x-h)/k,y:(v.y-l)/k})};this.toProjected=function(v){v=g.toProjected(v);return{x:v.x*k+h,y:v.y*k+l}}};this.Mercator=function(g,h,l){g*=0.017453292519943295;h*=0.017453292519943295;
var k=l.e*l.e,v=Math.sin(h),j=1/(Math.sqrt(1-k*v*v)/Math.cos(h));h=k*k;v=h*k;var m=v*k,q=k/2+5*h/24+v/12+13*m/360,u=7*h/48+29*v/240+811*m/11520,J=7*v/120+81*m/1120,L=4279*m/161280;this.toGeodetic=function(I){var H=t(g+I.x/(j*l.smaj));I=1.5707963267948966-2*Math.atan(1/Math.exp(I.y/(j*l.smaj)));return{x:H*57.29577951308232,y:(I+q*Math.sin(2*I)+u*Math.sin(4*I)+J*Math.sin(6*I)+L*Math.sin(8*I))*57.29577951308232}};this.toProjected=function(I){var H=I.y*0.017453292519943295,K=l.e*Math.sin(H);H=Math.tan(Math.PI/
4+H/2)*Math.pow((1-K)/(1+K),l.e/2);I=t(I.x*0.017453292519943295-g);return{x:j*l.smaj*I,y:j*l.smaj*Math.log(H)}}};this.Spheroid=function(g,h){switch(typeof g){case "number":this.smaj=g;this.e=h;break;case "string":switch(g){case "WGS84Sphere":this.smaj=6378137;this.e=0}}this.smin=this.smaj*Math.sqrt(1-this.e*this.e);var l=(this.smaj-this.smin)/this.smaj;this.distance=function(k,v,j){if(arguments.length<3)j=1;switch(j){case "meters":j=1;break;case "feet":j=3.2808333333333333}var m=k.y*0.017453292519943295,
q=v.y*0.017453292519943295,u=(m+q)*0.5,J=(m-q)*0.5,L=(k.x*0.017453292519943295-v.x*0.017453292519943295)*0.5;m=Math.sin(u);m*=m;u=Math.cos(u);u*=u;q=Math.sin(J);q*=q;J=Math.cos(J);J*=J;var I=Math.sin(L);I*=I;var H=Math.cos(L);H*=H;L=q*H+u*I;I=J*H+m*I;H=Math.atan(Math.sqrt(L/I));var K=Math.sqrt(L*I)/H;return 2*this.smaj*H*(1+l*((3*K-1)/(2*I)*m*J-(3*K+1)/(2*L)*u*q))*j}};var p=new Mercator(0,0,new Spheroid("WGS84Sphere"));return{fromGeodetic:function(g){var h=d.isArray(g[0]),l=[],k=0,v;for(h||(g=[g]);k<
g.length;k++){v=p.toProjected({x:g[k][0],y:g[k][1]});l[k]=[v.x,v.y]}return h?l:l[0]},toGeodetic:function(g){var h=d.isArray(g[0]),l=[],k=0,v;for(h||(g=[g]);k<g.length;k++){v=p.toGeodetic({x:g[k][0],y:g[k][1]});l[k]=[v.x,v.y]}return h?l:l[0]}}}()}})(jQuery,this);
(function(d){var t,G,p=true,g,h,l,k,v=function(){for(var j=5,m=document.createElement("div"),q=m.all||[];m.innerHTML="<!--[if gt IE "+ ++j+"]><br><![endif]--\>",q[0];);return j>6?j:!j}();d.widget("geo.geographics",{options:{style:{color:"#7f0000",fillOpacity:0.2,height:"8px",opacity:1,strokeOpacity:1,strokeWidth:"2px",visibility:"visible",width:"8px"}},_create:function(){t=this.element;G=this.options;t.css({display:"inline-block",overflow:"hidden",textAlign:"left"});t.css("position")=="static"&&t.css("position",
"relative");g=t.width();h=t.height();if(!(g&&h)){g=parseInt(t.css("width"));h=parseInt(t.css("height"))}if(document.createElement("canvas").getContext){t.append('<canvas width="'+g+'" height="'+h+'" style="position:absolute; left:0; top:0; width:'+g+"px; height:"+h+'px;"></canvas>');l=t.children(":last");k=l[0].getContext("2d")}else if(v<=8){p=false;t.append('<div width="'+g+'" height="'+h+'" style="position:absolute; left:0; top:0; width:'+g+"px; height:"+h+'px; margin:0; padding:0;"></div>');l=
t.children(":last");G_vmlCanvasManager.initElement(l[0]);k=l[0].getContext("2d");l.children().css({backgroundColor:"transparent",width:g,height:h})}},_setOption:function(j,m){if(j=="style")m=d.extend({},G.style,m);d.Widget.prototype._setOption.apply(this,arguments)},destroy:function(){d.Widget.prototype.destroy.apply(this,arguments);t.html("")},clear:function(){k.clearRect(0,0,g,h)},drawArc:function(j,m,q,u){u=this._getGraphicStyle(u);if(u.visibility!="hidden"&&u.widthValue>0&&u.heightValue>0){var J=
Math.min(u.widthValue,u.heightValue)/2;m=m*Math.PI/180;q=q*Math.PI/180;k.save();k.translate(j[0],j[1]);u.widthValue>u.heightValue?k.scale(u.widthValue/u.heightValue,1):k.scale(1,u.heightValue/u.widthValue);k.beginPath();k.arc(0,0,J,m,q,false);p&&k.restore();if(u.doFill){k.fillStyle=u.fill;k.globalAlpha=u.opacity*u.fillOpacity;k.fill()}if(u.doStroke){k.lineJoin="round";k.lineWidth=u.strokeWidthValue;k.strokeStyle=u.stroke;k.globalAlpha=u.opacity*u.strokeOpacity;k.stroke()}p||k.restore()}},drawPoint:function(){},
drawLineString:function(j,m){this._drawLines([j],false,m)},drawPolygon:function(j,m){this._drawLines(j,true,m)},drawBbox:function(j,m){this._drawLines([[[j[0],j[1]],[j[0],j[3]],[j[2],j[3]],[j[2],j[1]],[j[0],j[1]]]],true,m)},_getGraphicStyle:function(j){function m(q){q=parseInt(q);return+q+""===q?+q:q}j=d.extend({},G.style,j);j.fill=j.fill||j.color;j.fillOpacity=j.fillOpacity||j.opacity;j.doFill=j.fill&&j.fillOpacity>0;j.stroke=j.stroke||j.color;j.strokeOpacity=j.strokeOpacity||j.opacity;j.strokeWidthValue=
m(j.strokeWidth);j.doStroke=j.stroke&&j.strokeOpacity>0&&j.strokeWidthValue>0;j.widthValue=m(j.width);j.heightValue=m(j.height);return j},_drawLines:function(j,m,q){if(!(!j||!j.length||j[0].length<2)){q=this._getGraphicStyle(q);var u,J;if(q.visibility!="hidden"){if(q.doFill&&m){k.fillStyle=q.fill;k.globalAlpha=q.opacity*q.fillOpacity;k.beginPath();k.moveTo(j[0][0][0],j[0][0][1]);var L=j[0][j[0].length-1];for(u=0;u<j.length;u++){for(J=0;J<j[u].length;J++)k.lineTo(j[u][J][0],j[u][J][1]);u>0&&k.lineTo(L[0],
L[1])}k.closePath();k.globalAlpha=q.opacity*q.fillOpacity;k.fill()}if(q.doStroke){k.lineJoin="round";k.lineWidth=q.strokeWidthValue;k.strokeStyle=q.stroke;k.globalAlpha=q.opacity*q.strokeOpacity;for(u=0;u<j.length;u++){k.beginPath();k.moveTo(j[u][0][0],j[u][0][1]);for(J=0;J<j[u].length;J++)k.lineTo(j[u][J][0],j[u][J][1]);m&&k.lineTo(j[u][0][0],j[u][0][1]);k.stroke()}}}}}})})(jQuery);
(function(d,t){var G,p={},g,h,l,k,v,j=[],m,q,u,J,L=null,I=0,H,K,ba,ia,ga,Q,aa,ea,ma,Z,D,R,fa,na=function(){for(var a=5,b=document.createElement("div"),e=b.all||[];b.innerHTML="<!--[if gt IE "+ ++a+"]><br><![endif]--\>",e[0];);return a>6?a:!a}(),c,f,o,B,E=[],w={},x={},ja={bbox:[-180,-85,180,85],bboxMax:[-180,-85,180,85],center:[0,0],cursors:{pan:"move"},mode:"pan",services:[{id:"OSM",type:"tiled",getUrl:function(a){return"http://tile.openstreetmap.org/"+a.zoom+"/"+a.tile.column+"/"+a.tile.row+".png"},
attr:"&copy; OpenStreetMap &amp; contributors, CC-BY-SA"}],tilingScheme:{tileWidth:256,tileHeight:256,levels:18,basePixelSize:156543.03392799935,origin:[-2.0037508342787E7,2.0037508342787E7]},zoom:0,_serviceTypes:{tiled:function(){var a={};return{create:function(b,e){if(!a[e.id]){a[e.id]={loadCount:0,reloadTiles:false,serviceContainer:null};h.append("<div data-service='"+e.id+"' style='position:absolute; left:0; top:0; width:8px; height:8px; margin:0; padding:0; display:"+(e.visible===t||e.visible?
"block":"none")+";'></div>");a[e.id].serviceContainer=h.children("[data-service='"+e.id+"']")}},destroy:function(b,e){a[e.id].serviceContainer.remove();delete a[e.id]},interactivePan:function(b,e,n,r){if(a[e.id]){this._cancelUnloaded(b,e);a[e.id].serviceContainer.children().css({left:function(ha,oa){return parseInt(oa)+n},top:function(ha,oa){return parseInt(oa)+r}});if(e&&a[e.id]!=null&&(e.visible===t||e.visible)){var s=q,z=a[e.id],F=z.serviceContainer,C=F.children("[data-pixelSize='"+s+"']"),y=b.options.tilingScheme,
A=y.tileWidth,M=y.tileHeight,U=p.width/2*s,O=p.height/2*s,P=C.position(),N=C.data("scaleOrigin").split(","),ca=parseInt(N[0])-P.left;P=parseInt(N[1])-P.top;var S=m;N=[S[0]+ca*s,S[1]-P*s];var W=Math.floor((N[0]-U-y.origin[0])/(s*A));ca=Math.floor((y.origin[1]-(N[1]+O))/(s*M));P=Math.ceil((N[0]+U-y.origin[0])/(s*A));N=Math.ceil((y.origin[1]-(N[1]-O))/(s*M));var X=b._getBboxMax(),V=b._getTiledPixelSize(0),T=V/s,Y=Math.floor((X[0]-y.origin[0])/(V*A))*T;X=Math.floor((y.origin[1]-X[3])/(V*M))*T;U=Math.round((y.origin[0]+
Y*A*s-(S[0]-U))/s);O=Math.round((S[1]+O-(y.origin[1]-X*M*s))/s);var ka=e.opacity===t?1:e.opacity;for(S=W;S<P;S++)for(W=ca;W<N;W++){V=""+S+","+W;T=C.children("[data-tile='"+V+"']").removeAttr("data-dirty");if(T.size()===0){var la=[y.origin[0]+S*A*s,y.origin[1]-W*M*s],da=[y.origin[0]+((S+1)*A-1)*s,y.origin[1]-((W+1)*M-1)*s];la=e.getUrl({bbox:[la[0],la[1],da[0],da[1]],width:A,height:M,zoom:b._getZoom(),tile:{row:W,column:S},index:Math.abs(W+S)});z.loadCount++;if(z.reloadTiles&&T.size()>0)T.attr("src",
la);else{T="<img style='position:absolute; left:"+((S-Y)*100+(U-U%A)/A*100)+"%; top:"+((W-X)*100+(O-O%M)/M*100)+"%; ";if(d("body")[0].filters===t)T+="width: 100%; height: 100%;";T+="margin:0; padding:0; -khtml-user-select:none; -moz-user-select:none; -webkit-user-select:none; user-select:none; display:none;' unselectable='on' data-tile='"+V+"' />";C.append(T);T=C.children(":last");T.load(function(ha){ka<1?d(ha.target).fadeTo(0,ka):d(ha.target).show();z.loadCount--;if(z.loadCount<=0){F.children(":not([data-pixelSize='"+
s+"'])").remove();z.loadCount=0}}).error(function(ha){d(ha.target).remove();z.loadCount--;if(z.loadCount<=0){F.children(":not([data-pixelSize='"+s+"'])").remove();z.loadCount=0}}).attr("src",la)}}}}}},interactiveScale:function(b,e,n,r){if(a[e.id]){this._cancelUnloaded(b,e);var s=b.options.tilingScheme,z=s.tileWidth,F=s.tileHeight;a[e.id].serviceContainer.children().each(function(){var C=d(this),y=C.attr("data-pixelSize")/r;y=Math.round(y*1E3)/1E3;var A=C.data("scaleOrigin").split(",");A=b._toMap([A[0],
A[1]]);A=b._toPixel(A,n,r);C.css({left:Math.round(A[0])+"px",top:Math.round(A[1])+"px",width:z*y,height:F*y});d("body")[0].filters!==t&&C.children().each(function(){d(this).css("filter","progid:DXImageTransform.Microsoft.Matrix(FilterType=bilinear,M11="+y+",M22="+y+",sizingmethod='auto expand')")})})}},refresh:function(b,e){if(e&&a[e.id]&&(e.visible===t||e.visible)){this._cancelUnloaded(b,e);var n=b._getBbox(),r=q,s=a[e.id],z=s.serviceContainer,F=b.options.tilingScheme,C=F.tileWidth,y=F.tileHeight,
A=Math.floor((n[0]-F.origin[0])/(r*C)),M=Math.floor((F.origin[1]-n[3])/(r*y)),U=Math.ceil((n[2]-F.origin[0])/(r*C)),O=Math.ceil((F.origin[1]-n[1])/(r*y)),P=b._getBboxMax(),N=b._getTiledPixelSize(0),ca=N/r,S=Math.floor((P[0]-F.origin[0])/(N*C))*ca,W=Math.floor((F.origin[1]-P[3])/(N*y))*ca,X=Math.round((F.origin[0]+S*C*r-n[0])/r),V=Math.round((n[3]-(F.origin[1]-W*y*r))/r);n=z.children().show();P=n.filter("[data-pixelSize='"+r+"']").appendTo(z);var T=e.opacity===t?1:e.opacity;s.reloadTiles&&n.find("img").attr("data-dirty",
"true");if(P.size()){P.css({left:X%C+"px",top:V%y+"px"}).data("scaleOrigin",X%C+","+V%y);P.children().each(function(){var da=d(this),ha=da.attr("data-tile").split(",");da.css({left:Math.round((parseInt(ha[0])-S)*100+(X-X%C)/C*100)+"%",top:Math.round((parseInt(ha[1])-W)*100+(V-V%y)/y*100)+"%"});T<1&&da.fadeTo(0,T)})}else{z.append("<div style='position:absolute; left:"+X%C+"px; top:"+V%y+"px; width:"+C+"px; height:"+y+"px; margin:0; padding:0;' data-pixelSize='"+r+"'></div>");P=z.children(":last").data("scaleOrigin",
X%C+","+V%y)}for(A=A;A<U;A++)for(N=M;N<O;N++){ca=""+A+","+N;var Y=P.children("[data-tile='"+ca+"']").removeAttr("data-dirty");if(Y.size()===0||s.reloadTiles){var ka=[F.origin[0]+A*C*r,F.origin[1]-N*y*r],la=[F.origin[0]+((A+1)*C-1)*r,F.origin[1]-((N+1)*y-1)*r];ka=e.getUrl({bbox:[ka[0],ka[1],la[0],la[1]],width:C,height:y,zoom:b._getZoom(),tile:{row:N,column:A},index:Math.abs(N+A)});s.loadCount++;if(s.reloadTiles&&Y.size()>0)Y.attr("src",ka);else{Y="<img style='position:absolute; left:"+((A-S)*100+(X-
X%C)/C*100)+"%; top:"+((N-W)*100+(V-V%y)/y*100)+"%; ";if(d("body")[0].filters===t)Y+="width: 100%; height: 100%;";Y+="margin:0; padding:0; -khtml-user-select:none; -moz-user-select:none; -webkit-user-select:none; user-select:none; display:none;' unselectable='on' data-tile='"+ca+"' />";P.append(Y);Y=P.children(":last");Y.load(function(da){T<1?d(da.target).fadeTo(0,T):d(da.target).show();s.loadCount--;if(s.loadCount<=0){z.children(":not([data-pixelSize='"+r+"'])").remove();s.loadCount=0}}).error(function(da){d(da.target).remove();
s.loadCount--;if(s.loadCount<=0){z.children(":not([data-pixelSize='"+r+"'])").remove();s.loadCount=0}}).attr("src",ka)}}}n.find("[data-dirty]").remove();s.reloadTiles=false}},_cancelUnloaded:function(b,e){var n=a[e.id];if(n&&n.loadCount>0)for(n.serviceContainer.find("img:hidden").remove();n.loadCount>0;)n.loadCount--}}}(),shingled:function(){var a={};return{create:function(b,e){if(!a[e.id]){a[e.id]={loadCount:0};h.append('<div data-service="'+e.id+'" style="position:absolute; left:0; top:0; width:16px; height:16px; margin:0; padding:0; display:'+
(e.visible===t||e.visible?"block":"none")+';"></div>');a[e.id].serviceContainer=h.children('[data-service="'+e.id+'"]')}},destroy:function(b,e){a[e.id].serviceContainer.remove();delete a[e.id]},interactivePan:function(b,e,n,r){if(a[e.id]){this._cancelUnloaded(b,e);b=a[e.id].serviceContainer.children("[data-pixelSize='"+q+"']");e=b.children("div");if(!e.length){b.children("img").wrap('<div style="position:absolute; left:0; top:0; width:100%; height:100%;"></div>');e=b.children("div")}e.css({left:function(s,
z){return parseInt(z)+n},top:function(s,z){return parseInt(z)+r}})}},interactiveScale:function(b,e,n,r){if(a[e.id]){this._cancelUnloaded(b,e);var s=p.width,z=p.height,F=s/2,C=z/2;a[e.id].serviceContainer.children().each(function(){var y=d(this),A=y.attr("data-pixelSize"),M=A/r;y.css({width:s*M,height:z*M}).children("img").each(function(){var U=d(this),O=U.data("center");U.css({left:(Math.round((O[0]-n[0])/A)-F)*M+"px",top:(Math.round((n[1]-O[1])/A)-C)*M+"px"})})})}},refresh:function(b,e){if(e&&a[e.id]&&
(e.visible===t||e.visible)){this._cancelUnloaded(b,e);var n=b._getBbox(),r=q,s=a[e.id],z=s.serviceContainer,F=p.width,C=p.height,y=F/2,A=C/2,M=z.children('[data-pixelSize="'+r+'"]'),U=e.opacity===t?1:e.opacity;if(!M.size()){z.append('<div style="position:absolute; left:'+y+"px; top:"+A+"px; width:"+F+"px; height:"+C+'px; margin:0; padding:0;" data-pixelSize="'+r+'"></div>');M=z.children(":last")}M.children("img").each(function(){var O=d(this),P=O.data("center");O.css({left:Math.round((P[0]-m[0])/
r)-y+"px",top:Math.round((m[1]-P[1])/r)-A+"px"})});U<1&&z.find("img").attr("data-keepAlive","0");n=e.getUrl({bbox:n,width:F,height:C,zoom:b._getZoom(),tile:null,index:0});s.loadCount++;M.append('<img style="position:absolute; left:-'+y+"px; top:-"+A+'px; width:100%; height:100%; margin:0; padding:0; -khtml-user-select:none; -moz-user-select:none; -webkit-user-select:none; user-select:none; display:none;" unselectable="on" />');M.children(":last").data("center",m).load(function(O){U<1?d(O.target).fadeTo(0,
U):d(O.target).show();s.loadCount--;if(s.loadCount<=0){z.children(':not([data-pixelSize="'+r+'"])').remove();O=z.find('[data-pixelSize="'+r+'"]>div');if(O.size()>0){var P=O.position();O.children("img").each(function(){var N=d(this),ca=P.left+parseInt(N.css("left")),S=P.top+parseInt(N.css("top"));N.css({left:ca+"px",top:S+"px"})}).unwrap();O.remove()}s.loadCount=0}}).error(function(O){d(O.target).remove();s.loadCount--;if(s.loadCount<=0){z.children(":not([data-pixelSize='"+r+"'])").remove();s.loadCount=
0}}).attr("src",n)}},_cancelUnloaded:function(b,e){var n=a[e.id];if(n&&n.loadCount>0)for(n.serviceContainer.find("img:hidden").remove();n.loadCount>0;)n.loadCount--}}}()}};d.widget("geo.geomap",function(){return{options:d.extend({},ja),_createWidget:function(a,b){w=a;G=d(b);this._forcePosition(G);G.css("text-align","left");var e=this._findMapSize();p={x:parseInt(G.css("padding-left")),y:parseInt(G.css("padding-top")),width:e.width,height:e.height};this._createChildren();m=u=[0,0];q=J=156543.03392799935;
H=K=ba=ia=D=o=B=false;ga=Q=ma=Z=R=[0,0];fa=[0.8,0.8];aa=ea=0;d.Widget.prototype._createWidget.apply(this,arguments)},_create:function(){x=this.options;f=(c="ontouchend"in document)||na==7;var a=c?"touchstart":"mousedown",b=c?"touchend touchcancel":"mouseup",e=c?"touchmove":"mousemove";v.dblclick(d.proxy(this._eventTarget_dblclick,this));v.bind(a,d.proxy(this._eventTarget_touchstart,this));a=v[0].setCapture?v:d(document);a.bind(e,d.proxy(this._dragTarget_touchmove,this));a.bind(b,d.proxy(this._dragTarget_touchstop,
this));v.mousewheel(d.proxy(this._eventTarget_mousewheel,this));l.geographics();if(w){w.bbox&&this._setOption("bbox",w.bbox,false);w.center&&this._setOption("center",w.center,false);w.zoom&&this._setZoom(w.zoom,false,false)}v.css("cursor",x.cursors[x.mode]);this._createServices();this._refresh()},_setOption:function(a,b,e){e=e===t||e;switch(a){case "bbox":if(d.geo.proj){b=d.geo.proj.fromGeodetic([[b[0],b[1]],[b[2],b[3]]]);b=[b[0][0],b[0][1],b[1][0],b[1][1]]}this._setBbox(b,false,e);b=this._getBbox();
if(d.geo.proj){b=d.geo.proj.toGeodetic([[b[0],b[1]],[b[2],b[3]]]);b=[b[0][0],b[0][1],b[1][0],b[1][1]]}break;case "center":this._setCenterAndSize(d.geo.proj?d.geo.proj.fromGeodetic([[b[0],b[1]]])[0]:b,q,false,e);break;case "zoom":this._setZoom(b,false,e)}d.Widget.prototype._setOption.apply(this,arguments);switch(a){case "services":this._createServices();e&&this._refresh()}},destroy:function(){d.Widget.prototype.destroy.apply(this,arguments);this.element.html("")},getPixelSize:function(){return q},
toMap:function(a){a=this._toMap(a);return d.geo.proj?d.geo.proj.toGeodetic(a):a},toPixel:function(a){a=d.geo.proj?d.geo.proj.fromGeodetic(a):a;return this._toPixel(a)},refresh:function(){this._refresh()},shapeStyle:function(a){if(a){l.geographics("option","style",a);this._refresh()}else return l.geographics("option","style")},append:function(a,b,e){e=e===t||e;if(a){var n=this;a=a.type=="FeatureCollection"?a.features:d.isArray(a)?a:[a];d.each(a,function(){if(this.type=="GeometryCollection")n.append(this.geometries,
b,false);else E[E.length]={shape:this,style:b}});e&&this._refresh()}},_getBbox:function(){var a=p.width/2*q,b=p.height/2*q;return[m[0]-a,m[1]-b,m[0]+a,m[1]+b]},_setBbox:function(a,b,e){var n=[a[0]+(a[2]-a[0])/2,a[1]+(a[3]-a[1])/2];a=Math.max(d.geo._width(a)/p.width,d.geo._height(a)/p.height);if(x.tilingScheme)a=this._getTiledPixelSize(this._getTiledZoom(a));this._setCenterAndSize(n,a,b,e)},_getBboxMax:function(){var a=p.width/2*J,b=p.height/2*J;return[u[0]-a,u[1]-b,u[0]+a,u[1]+b]},_getZoom:function(){if(x.tilingScheme)return this._getTiledZoom(q);
else{var a=p.width/p.height,b=d.geo._reaspect(this._getBbox(),a);a=d.geo._reaspect(this._getBboxMax(),a);return Math.log(d.geo._width(a)/d.geo._width(b))/Math.log(2)}},_setZoom:function(a,b,e){a=Math.max(a,0);if(x.tilingScheme)this._setCenterAndSize(m,this._getTiledPixelSize(a),b,e);else{a=d.geo._scaleBy(this._getBbox(),1/Math.pow(2,a));a=Math.max(d.geo._width(a)/p.width,d.geo._height(a)/p.height);this._setCenterAndSize(m,a,b,e)}},_createChildren:function(){var a=G.children().detach();this._forcePosition(a);
a.css("-moz-user-select","none");G.prepend("<div style='position:absolute; left:"+p.x+"px; top:"+p.y+"px; width:"+p.width+"px; height:"+p.height+"px; margin:0; padding:0; overflow:hidden; -khtml-user-select:none; -moz-user-select:none; -webkit-user-select:none; user-select:none;' unselectable='on'></div>");v=g=G.children(":first");g.append('<div style="position:absolute; left:0; top:0; width:'+p.width+"px; height:"+p.height+'px; margin:0; padding:0;"></div>');h=g.children(":last");g.append('<div style="position:absolute; left:0; top:0; width:'+
p.width+"px; height:"+p.height+'px; margin:0; padding:0;"></div>');l=g.children(":last");g.append('<div class="ui-widget ui-widget-content ui-corner-all" style="position:absolute; left:0; top:0px; max-width:128px; display:none;"><div style="margin:.2em;"></div></div>');k=g.children(":last");k.children();g.append(a)},_createServices:function(){var a;for(a=0;a<j.length;a++)x._serviceTypes[j[a].type].destroy(this,j[a]);for(a=0;a<x.services.length;a++)x._serviceTypes[x.services[a].type].create(this,x.services[a],
a);j=x.services},_drawGraphics:function(a,b){var e,n,r,s,z,F=this;for(e=0;e<b.length;e++){r=b[e].shape.geometry?b[e].shape.geometry:b[e].shape;s=E[e].style;switch(r.type){case "Point":l.geographics("drawArc",this.toPixel(r.coordinates),0,360,s);break;case "LineString":l.geographics("drawLineString",this.toPixel(r.coordinates),s);break;case "Polygon":z=[];d.each(r.coordinates,function(C){z[C]=F.toPixel(this)});l.geographics("drawPolygon",z,s);break;case "MultiPoint":for(n=0;n<r.coordinates;n++)l.geographics("drawArc",
this.toPixel(r.coordinates[n]),0,360,s);break;case "MultiLineString":for(n=0;n<r.coordinates;n++)l.geographics("drawLineString",this.toPixel(r.coordinates[n]),s);break;case "MultiPolygon":for(n=0;n<r.coordinates;n++){z=[];d.each(r.coordinates[n],function(C){z[C]=F.toPixel(this)});l.geographics("drawPolygon",z,s)}}}},_findMapSize:function(){for(var a={width:0,height:0},b=G;b.size()&&!(a.width>0&&a.height>0);){a={width:b.width(),height:b.height()};if(a.width<=0||a.height<=0)a={width:parseInt(b.css("width")),
height:parseInt(b.css("height"))};b=b.parent()}return a},_forcePosition:function(a){var b=a.css("position");b!="relative"&&b!="absolute"&&b!="fixed"&&a.css("position","relative")},_getTiledPixelSize:function(a){var b=x.tilingScheme;if(b!=null){if(a===0)return b.pixelSizes!=null?b.pixelSizes[0]:b.basePixelSize;a=Math.round(a);a=Math.max(a,0);a=Math.min(a,(b.pixelSizes!=null?b.pixelSizes.length:b.levels)-1);return b.pixelSizes!=null?b.pixelSizes[a]:b.basePixelSize/Math.pow(2,a)}else return NaN},_getTiledZoom:function(a){var b=
x.tilingScheme;if(b.pixelSizes!=null){a=Math.round(a);for(var e=(b.pixelSizes!=null?b.pixelSizes.length:b.levels)-1;e>=0;e--)if(Math.round(b.pixelSizes[e])>=a)return e;return 0}else return Math.max(Math.round(Math.log(b.basePixelSize/a)/Math.log(2)),0)},_getWheelCenterAndSize:function(){var a;if(x.tilingScheme){a=this._getTiledZoom(q)+I;a=this._getTiledPixelSize(a)}else{a=Math.pow(1.18920711500273,-I);a=q*a}var b=a/q,e=this._toMap(ga);b=[(m[0]-e[0])*b,(m[1]-e[1])*b];return{pixelSize:a,center:[e[0]+
b[0],e[1]+b[1]]}},_mouseWheelFinish:function(){L=null;if(I!=0){var a=this._getWheelCenterAndSize();I=0;this._setCenterAndSize(a.center,a.pixelSize,true,true)}else this._refresh()},_panEnd:function(){R=[R[0]>0?Math.floor(R[0]*fa[0]):Math.ceil(R[0]*fa[0]),R[1]>0?Math.floor(R[1]*fa[1]):Math.ceil(R[1]*fa[1])];if(Math.abs(R[0])<4&&Math.abs(R[1])<4)this._panFinalize();else{Q=[Q[0]+R[0],Q[1]+R[1]];this._panMove();setTimeout(d.proxy(this._panEnd,this),30)}},_panFinalize:function(){if(D){R=[0,0];var a=-(Q[0]-
ga[0])*q,b=(Q[1]-ga[1])*q;l.css({left:0,top:0});this._setCenterAndSize([m[0]+a,m[1]+b],q,true,true);K=false;ga=Q;ba=D=false;v.css("cursor",x.cursors[x.mode])}},_panMove:function(){var a=Q[0]-Z[0],b=Q[1]-Z[1];if(ba||a>3||a<-3||b>3||b<-3){if(!ba){ba=true;v.css("cursor",x.cursors.pan)}if(H)R=[a,b];if(a!=0||b!=0){D=true;Z=Q;for(i=0;i<x.services.length;i++){var e=x.services[i];x._serviceTypes[e.type].interactivePan(this,e,a,b)}l.css({left:function(n,r){return parseInt(r)+a},top:function(n,r){return parseInt(r)+
b}})}}},_refresh:function(){for(var a=0;a<x.services.length;a++){var b=x.services[a];!H&&x._serviceTypes[b.type]!=null&&x._serviceTypes[b.type].refresh(this,b)}if(E.length>0){l.geographics("clear");this._drawGraphics(l,E)}},_setCenterAndSize:function(a,b,e,n){if(q!=b){l.geographics("clear");for(var r=0;r<x.services.length;r++){var s=x.services[r];x._serviceTypes[s.type].interactiveScale(this,s,a,b)}}m=a;q=b;if(d.geo.proj){a=this._getBbox();a=d.geo.proj.toGeodetic([[a[0],a[1]],[a[2],a[3]]]);a=[a[0][0],
a[0][1],a[1][0],a[1][1]];x.bbox=a;x.center=d.geo.proj.toGeodetic([[m[0],m[1]]])[0]}else{x.bbox=this._getBbox();x.center=m}x.zoom=this._getZoom();e&&this._trigger("bboxchange",window.event,{bbox:x.bbox});n&&this._refresh()},_toMap:function(a,b,e){var n=d.isArray(a[0]);n||(a=[a]);b=b||m;e=e||q;var r=p.width,s=p.height,z=r/2*e;e=s/2*e;var F=[b[0]-z,b[1]-e,b[0]+z,b[1]+e],C=d.geo._width(F)/r,y=d.geo._height(F)/s,A=[];d.each(a,function(M){A[M]=[F[0]+this[0]*C,F[3]-this[1]*y]});return n?A:A[0]},_toPixel:function(a,
b,e){var n=d.isArray(a[0]);n||(a=[a]);b=b||m;e=e||q;var r=p.width,s=p.height,z=r/2*e;e=s/2*e;var F=[b[0]-z,b[1]-e,b[0]+z,b[1]+e],C=d.geo._width(F),y=d.geo._height(F),A=[];d.each(a,function(M){A[M]=[(this[0]-F[0])*r/C,(F[3]-this[1])*s/y]});return n?A:A[0]},_zoomTo:function(a,b,e,n){b=b<0?0:b;var r=this._getTiledPixelSize(b);if(isNaN(r)){b=d.geo._scaleBy(this._getBboxMax(),1/Math.pow(2,b));b=Math.max(d.geo._width(b)/p.width,d.geo._height(b)/p.height);this._setCenterAndSize(a,b,e,n)}else this._setCenterAndSize(a,
r,e,n)},_eventTarget_dblclick:function(a){this._panFinalize();d(a.currentTarget).offset();switch(x.mode){case "pan":this._trigger("dblclick",a,{pixels:Q,coordinates:this.toMap(Q)});a.isDefaultPrevented()||this._zoomTo(this._toMap(Q),this._getZoom()+1,true,true)}K=false},_eventTarget_touchstart:function(a){if(!(!c&&a.which!=1)){if(f){var b=d.now();B=b-aa<750?B?false:o:false;o=true;aa=b}a.preventDefault();this._panFinalize();this._mouseWheelFinish();b=d(a.currentTarget).offset();Q=c?[a.originalEvent.changedTouches[0].pageX-
b.left,a.originalEvent.changedTouches[0].pageY-b.top]:[a.pageX-b.left,a.pageY-b.top];H=true;ga=Q;if(!K&&a.shiftKey){ia=true;v.css("cursor",x.cursors.zoom)}else{K=true;switch(x.mode){case "pan":Z=Q;a.currentTarget.setCapture&&a.currentTarget.setCapture()}}return false}},_dragTarget_touchmove:function(a){var b=v.offset();b=c?[a.originalEvent.changedTouches[0].pageX-b.left,a.originalEvent.changedTouches[0].pageY-b.top]:[a.pageX-b.left,a.pageY-b.top];if(!(b[0]==ma[0]&&b[1]==ma[1])){if(f)B=o=false;if(H){Q=
b;d.now()}switch(ia?"zoom":x.mode){case "pan":H||ba?this._panMove():this._trigger("move",a,{pixels:b,coordinates:this.toMap(b)})}ma=b}},_dragTarget_touchstop:function(a){!H&&na==7&&this._eventTarget_touchstart(a);var b=H,e=ba,n=v.offset();n=c?[a.originalEvent.changedTouches[0].pageX-n.left,a.originalEvent.changedTouches[0].pageY-n.top]:[a.pageX-n.left,a.pageY-n.top];var r=ia?"zoom":x.mode;v.css("cursor",x.cursors[r]);ia=H=ba=false;document.releaseCapture&&document.releaseCapture();if(b){b=d.now();
Q=n;switch(r){case "pan":if(e)this._panEnd();else if(b-ea>100){this._trigger("click",a,{pixels:n,coordinates:this.toMap(n)});K=false}}ea=b;if(f&&B){B=o=false;v.trigger("dblclick",a)}}},_eventTarget_mousewheel:function(a,b){a.preventDefault();this._panFinalize();if(!H){if(b!=0){if(L){window.clearTimeout(L);L=null}else{var e=d(a.currentTarget).offset();ga=[a.pageX-e.left,a.pageY-e.top]}I+=b;e=this._getWheelCenterAndSize();l.geographics("clear");for(i=0;i<x.services.length;i++){var n=x.services[i];x._serviceTypes[n.type].interactiveScale(this,
n,e.center,e.pixelSize)}var r=this;L=window.setTimeout(function(){r._mouseWheelFinish()},1E3)}return false}}}}())})(jQuery);
