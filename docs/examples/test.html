<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>jQuery Geo test page</title>
  <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">
  <meta name="description" content="Test all of the things!">
  <meta name="author" content="Ryan Westphal">

  <style type="text/css">

    #map
    {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

  </style>
</head>
<body>
  <div id="map">
  </div>

  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

  <script src="../../js/excanvas.js"></script>
  <script src="../../js/jsrender.js"></script>
  <script src="../../js/jquery.mousewheel.js"></script>
  <script src="../../js/jquery.ui.widget.js"></script>
  <script src="../../js/jquery.geo.core.js"></script>
  <script src="../../js/jquery.geo.geographics.js"></script>
  <script src="../../js/jquery.geo.geomap.js"></script>
  <script src="../../js/jquery.geo.tiled.js"></script>
  <script src="../../js/jquery.geo.shingled.js"></script>
  <!--<script src="../jquery.geo-test.min.js"></script>-->

  <script>
    $( function ( ) {
// create a map
  var map = $("#map").geomap({
    center: [ -72, 42 ],
    zoom: 6,
    services: [
      {
        type: "tiled",
        src: "http://otile1.mqcdn.com/tiles/1.0.0/osm/{{:zoom}}/{{:tile.column}}/{{:tile.row}}.png"
      },
      {
        id: "gfx",
        type: "shingled"                 
      }
    ]
  });
  
  var gfx = $("#gfx").geomap("option", "shapeStyle", {
    color: "blue",
    strokeWidth: 8   
  });
  
  var shape = {
    type: "LineString",
    coordinates: [[ -72, 42 ], [-72.5, 42.5]]
  };
  
  map.geomap("append", shape);
  
  gfx.geomap("append", shape);
  
  setTimeout(function() {
    gfx.geomap("remove", shape);
    
    setTimeout(function() {
      console.log("searching for shape");
      
      var foundShape = map.geomap("find", {
        type: "Point",
        coordinates: [ -72, 42 ]
      }, 2);
      
      console.log( foundShape.length );
      //gfx.geomap("append", shape);
    }, 1000);
  }, 1000);

    } );  
  </script>
</body>
</html>
